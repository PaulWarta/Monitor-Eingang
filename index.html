<!DOCTYPE html>
<html lang="us">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preconnect" href="https://fonts.gstatic.com"> 
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700;900&display=swap" rel="stylesheet">
    <title>Document</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.gstatic.com"> 
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@700;900&display=swap" rel="stylesheet">
</head>
<body>
    <div class="Uhrzeit">
        <h1 id="Uhrzeit"></h1>
    </div>
    <div class="Wetter">
        <h1 id="Temperature"></h1>
        <img id="icon" src="">
    </div>
    <div class="Navigation">
        <h2>Schön, <br> dass Ihr <br> wider da seid!</h2>
    </div>
    <div class="Stundenplan"></div>
    <div class="News">
        <h3>
            Wenn ihr wollt, könnt Ihr <br> euch gerne hier <br> zusätzlich anmelden:
        </h3>
    </div>
    <div class="Poster"></div>
    <script>
        setInterval(
            function req_time() {
            var time = new Date;
            if (time.getMinutes().toString() < 10) {
                element = document.getElementById("Uhrzeit").innerText = time.getHours().toString() + ":0" + time.getMinutes().toString();
            } else {
                element = document.getElementById("Uhrzeit").innerText = time.getHours().toString() + ":" + time.getMinutes().toString();
            }
        }, 1000);
    </script>
    <script defer>
        function fetch_weather () {
            var xhttp = new XMLHttpRequest;
            xhttp.open("GET", "http://api.openweathermap.org/data/2.5/weather?q=muelheim&units=metric&appid=2e9c5036920dde9cf253e5f1581328c2", false);
            xhttp.send();
            let data = JSON.parse(xhttp.responseText);
            let ic = data.weather;
            ic = ic[0];
            ic = ic.icon;
            console.log(ic);
            let url = "http://openweathermap.org/img/wn/" + ic.toString() + "@2x.png";
            let temp = data.main;
            temp = temp.temp;
            console.log("URL: " + url);
            document.getElementById("icon").src = url;
            document.getElementById("Temperature").innerText = Math.round(temp.toString()).toString() + "\xB0";
        }
        setInterval(fetch_weather(), 60000)
        fetch_weather();
    </script>
</body>
</html>